<section class="cc-section cc-product">
  <div class="cc-container cc-product__grid">
    <div class="cc-product__media">
      {% if product.media.size > 0 %}
        {% for media in product.media %}
          <div class="cc-product__media-item{% if forloop.first %} is-active{% endif %}">
            {{ media | image_url: width: 1200 | image_tag: loading: 'lazy', alt: media.alt | escape }}
          </div>
        {% endfor %}
      {% elsif product.featured_image %}
        {{ product.featured_image | image_url: width: 1200 | image_tag: loading: 'lazy', alt: product.title }}
      {% endif %}
    </div>
    <div class="cc-product__details">
      <h1 class="cc-product__title">{{ product.title }}</h1>
      {% if settings.show_vendor and product.vendor %}
        <div class="cc-product__vendor">{{ product.vendor }}</div>
      {% endif %}
      <div class="cc-product__price">
        {% render 'price', product: product %}
      </div>
      {% if settings.show_sku and product.selected_or_first_available_variant.sku != blank %}
        <div class="cc-product__meta">
          <span>SKU {{ product.selected_or_first_available_variant.sku }}</span>
        </div>
      {% endif %}

      {% form 'product', product, class: 'cc-product-form' %}
        {% unless product.has_only_default_variant %}
          <div class="cc-product-form__options">
            {% for option in product.options_with_values %}
              <fieldset class="cc-product-form__option">
                <legend>{{ option.name }}</legend>
                <select name="options[{{ option.name }}]" class="cc-select">
                  {% for value in option.values %}
                    <option value="{{ value | escape }}" {% if option.selected_value == value %}selected{% endif %}>
                      {{ value }}
                    </option>
                  {% endfor %}
                </select>
              </fieldset>
            {% endfor %}
          </div>
        {% endunless %}

        <div class="cc-product-form__quantity">
          <label for="Quantity" class="cc-label">{{ 'products.product.quantity' | t }}</label>
          <input id="Quantity" class="cc-input" type="number" name="quantity" min="1" value="1">
        </div>

        <button type="submit" name="add" class="cc-button cc-button--primary" {% unless product.available %}disabled{% endunless %}>
          {% if product.available %}
            {{ 'products.product.add_to_cart' | t }}
          {% else %}
            {{ 'products.product.sold_out' | t }}
          {% endif %}
        </button>
      {% endform %}

      <div class="cc-product__accordion" data-cc-accordion>
        <button class="cc-product__accordion-toggle" type="button">
          {{ 'products.product.description' | t }}
        </button>
        <div class="cc-product__accordion-panel rte">
          {{ product.description }}
        </div>
      </div>
    </div>
  </div>

  <div class="cc-container cc-product__recommendations">
    {% section 'product-recommendations' %}
  </div>
</section>

{% schema %}
{
  "name": "Main product",
  "settings": [],
  "presets": [
    {
      "name": "Main product"
    }
  ]
}
{% endschema %}

