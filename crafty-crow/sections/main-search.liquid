<section class="cc-section cc-search">
  <div class="cc-container">
    <form action="{{ routes.search_url }}" method="get" role="search" class="cc-search__form">
      <label for="SearchInput" class="cc-label">{{ 'general.search.search' | t }}</label>
      <div class="cc-search__field">
        <input
          id="SearchInput"
          type="search"
          name="q"
          value="{{ search.terms | escape }}"
          placeholder="{{ 'general.search.search' | t }}"
          class="cc-input"
        >
        <button class="cc-button cc-button--primary" type="submit">
          {{ 'general.search.submit' | t }}
        </button>
      </div>
    </form>

    {% if search.performed %}
      <h1 class="cc-section-title">
        {{ 'general.search.results_with_count' | t: count: search.results_count, terms: search.terms }}
      </h1>

      {% paginate search.results by 24 %}
        <div class="cc-grid cc-grid--products">
          {% for item in search.results %}
            {% if item.object_type == 'product' %}
              {% render 'product-card', product: item %}
            {% else %}
              <article class="cc-search-result">
                <a href="{{ item.url }}" class="cc-search-result__title">{{ item.title }}</a>
                <div class="cc-search-result__excerpt">
                  {{ item.content | strip_html | truncate: 120 }}
                </div>
              </article>
            {% endif %}
          {% endfor %}
        </div>
        {% render 'pagination', paginate: paginate %}
      {% endpaginate %}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Main search",
  "settings": [],
  "presets": [
    {
      "name": "Main search"
    }
  ]
}
{% endschema %}

